

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Model Quickstart &mdash; DFFML 0.3.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installation" href="../installation.html" />
    <link rel="prev" title="About" href="../about.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DFFML
          

          
          </a>

          
            
            
              <div class="version">
                0.3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/service/http/index.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DFFML</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Model Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/quickstart/model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="model-quickstart">
<h1>Model Quickstart<a class="headerlink" href="#model-quickstart" title="Permalink to this headline">¶</a></h1>
<p>In this example we have employee data telling us the employee’s years of
experience, our level of trust in them, their level of expertise, and their
salary. Our goal will be to predict what the salary of a new hire should be,
given their years of experience, our level of trust in them, and their level of
expertise.</p>
<p><strong>training.csv</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Years</span><span class="p">,</span><span class="n">Expertise</span><span class="p">,</span><span class="n">Trust</span><span class="p">,</span><span class="n">Salary</span>
<span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mi">10</span>
<span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">20</span>
<span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mf">0.6</span><span class="p">,</span><span class="mi">30</span>
<span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mf">0.8</span><span class="p">,</span><span class="mi">40</span>
</pre></div>
</div>
<p><strong>test.csv</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Years</span><span class="p">,</span><span class="n">Expertise</span><span class="p">,</span><span class="n">Trust</span><span class="p">,</span><span class="n">Salary</span>
<span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mi">50</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mf">1.2</span><span class="p">,</span><span class="mi">60</span>
</pre></div>
</div>
<p>The model we’ll be using is a part of <code class="docutils literal notranslate"><span class="pre">dffml-model-tensorflow</span></code>, which is
another separate Python package from DFFML which we can install via <code class="docutils literal notranslate"><span class="pre">pip</span></code>.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> pip install -U dffml-model-tensorflow
</pre></div>
</div>
<p>We will be using Tensorflow’s deep neural network with a linear regressor as the
model. Other available models can be found on the plugin page.</p>
<p><strong>quickstart.py</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dffml.cli.ml</span> <span class="kn">import</span> <span class="n">Train</span><span class="p">,</span> <span class="n">Accuracy</span><span class="p">,</span> <span class="n">PredictAll</span>
<span class="kn">from</span> <span class="nn">dffml.feature.feature</span> <span class="kn">import</span> <span class="n">Features</span><span class="p">,</span> <span class="n">DefFeature</span>
<span class="kn">from</span> <span class="nn">dffml.source.csv</span> <span class="kn">import</span> <span class="n">CSVSource</span><span class="p">,</span> <span class="n">CSVSourceConfig</span>
<span class="kn">from</span> <span class="nn">dffml_model_tensorflow.dnnr</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DNNRegressionModel</span><span class="p">,</span>
    <span class="n">DNNRegressionModelConfig</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">training_data</span> <span class="o">=</span> <span class="n">CSVSource</span><span class="p">(</span>
    <span class="n">CSVSourceConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;training.csv&quot;</span><span class="p">,</span> <span class="n">readwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">test_data</span> <span class="o">=</span> <span class="n">CSVSource</span><span class="p">(</span><span class="n">CSVSourceConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">readwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="n">predict_data</span> <span class="o">=</span> <span class="n">CSVSource</span><span class="p">(</span>
    <span class="n">CSVSourceConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;predict.csv&quot;</span><span class="p">,</span> <span class="n">readwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">DNNRegressionModel</span><span class="p">(</span>
    <span class="n">DNNRegressionModelConfig</span><span class="p">(</span>
        <span class="n">features</span><span class="o">=</span><span class="n">Features</span><span class="p">(</span>
            <span class="n">DefFeature</span><span class="p">(</span><span class="s2">&quot;Years&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">DefFeature</span><span class="p">(</span><span class="s2">&quot;Expertise&quot;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="n">DefFeature</span><span class="p">(</span><span class="s2">&quot;Trust&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">),</span>
        <span class="n">predict</span><span class="o">=</span><span class="n">DefFeature</span><span class="p">(</span><span class="s2">&quot;Salary&quot;</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="n">Train</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="n">training_data</span><span class="p">])()</span>

<span class="n">accuracy</span> <span class="o">=</span> <span class="n">Accuracy</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="n">test_data</span><span class="p">])()</span>

<span class="n">row0</span><span class="p">,</span> <span class="n">row1</span> <span class="o">=</span> <span class="n">PredictAll</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="n">predict_data</span><span class="p">])()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Accuracy&quot;</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">row0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">row1</span><span class="p">)</span>
</pre></div>
</div>
<p>Here’s the two rows of new employee data we need predictions from</p>
<p><strong>predict.csv</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Years</span><span class="p">,</span><span class="n">Expertise</span><span class="p">,</span><span class="n">Trust</span>
<span class="mi">6</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mf">1.4</span>
<span class="mi">7</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">1.6</span>
</pre></div>
</div>
<p>Let’s run the <code class="docutils literal notranslate"><span class="pre">quickstart.py</span></code> file to get the predictions.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> python quickstart.py
<span class="go">Accuracy 0.8966069221496582</span>
<span class="go">70.49790954589844 (nan% confidence) 0</span>
<span class="go">Years                         6</span>
<span class="go">Expertise                     13</span>
<span class="go">Trust                         1.4</span>
<span class="go">80.61932373046875 (nan% confidence) 1</span>
<span class="go">Years                         7</span>
<span class="go">Expertise                     15</span>
<span class="go">Trust                         1.6</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../installation.html" class="btn btn-neutral float-right" title="Installation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../about.html" class="btn btn-neutral float-left" title="About" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Intel

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>